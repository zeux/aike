type ref<'T> = { contents: 'T }
type refpair<'T1, 'T2> = { first: ref<'T1>; second: ref<'T2> }

let reduce(x, f) =
    match x with refpair(first = ref(x), second = ref(y)) -> f(x, y)

reduce(refpair(ref(1), ref(true)), fun (x, y) -> x + y)

// ERRORS:
// (7,1): Type mismatch. Expecting a
//     (refpair<int, bool>, (int, int) -> int) -> int
// but given a
//     (refpair<int, bool>, (int, bool) -> int) -> int

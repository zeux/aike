extern fn init()
extern fn println(str: string)
extern fn printf(str: string, val: int, val: int)

struct Point
    x: int
    y: int

fn world(dbg: string, print: bool): string
    if print
        println(dbg)
    "world"

fn main(): int
    init()
    var hello = "Hello, "
    var foo = false
    if foo
        println("")
    else
        fn test(a0: string, a1: bool): string
            "inner"
        var f = fn (a0, a1) a0(a1)
        var g = f(fn(x) x, 1)
        println(worldwrap(fn (a0, a1) a0, "test", false))
        println(worldwrap(fn (a0: string, a1: bool): string "x", "test", false))
        println(worldwrap(world, "test", false))
        println(worldwrap(test, "test", false))
    printf("%d %d%c", 5, 10)

    var fp = fn(x) x.y
    var p = Point { x = 1, y = 2 }
    printf("%d %d,%d", p.x, fp(p))
    0

fn worldwrap(f: fn(string, bool): string, arg0: string, arg1: bool): string
    f(arg0, arg1)